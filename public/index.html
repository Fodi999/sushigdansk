<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sushi Delivery Gdansk</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">
    <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="/fonts/Roboto-Bold.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="/css/app.css" as="style">
    <link rel="preload" href="/images/Rectangle-3.webp" as="image">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <meta name="description" content="Best sushi delivery in Gdansk. Order now and enjoy fresh sushi at home!">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
</head>
<body>
    <!-- –•–µ–¥–µ—Ä —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º -->
    <header class="header">
        <img src="images/feis-1.webp" alt="Logo" class="logo">
        <h1 class="header-text">Sea food from chef Dmitry Fomin</h1>
    </header>

    <main class="main-content">
        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Ä—è–¥–∞ -->
        <div class="section-title-box">
            <h2 class="section-title"><i class='bx bxs-right-arrow'></i> –°—É—à–∏</h2>
        </div>
        <div class="card-container" id="card-container-row-1">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–µ—Ä–≤–æ–≥–æ —Ä—è–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —Ä—è–¥–∞ -->
        <div class="section-title-box">
            <h2 class="section-title"><i class='bx bxs-right-arrow'></i> –†–æ–ª–ª—ã</h2>
        </div>
        <div class="card-container" id="card-container-row-2">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —Ä—è–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä—è–¥–∞ -->
        <div class="section-title-box">
            <h2 class="section-title"><i class='bx bxs-right-arrow'></i> –°–µ—Ç—ã</h2>
        </div>
        <div class="card-container" id="card-container-row-3">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä—è–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>

        <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ —Ä—è–¥–∞ -->
        <div class="section-title-box">
            <h2 class="section-title"><i class='bx bxs-right-arrow'></i> –ó–∞–∫—É—Å–∫–∏</h2>
        </div>
        <div class="card-container" id="card-container-row-4">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ —Ä—è–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>
    </main>

    <!-- –ù–µ–ø–æ–¥–≤–∏–∂–Ω–æ–µ –º–µ–Ω—é -->
    <div class="navigation">
        <ul>
            <li class="list active" id="cart-button">
                <a href="#" aria-label="Cart">
                    <span class="icon"><ion-icon name="cart-outline"></ion-icon></span>
                    <span class="text">–ö–æ—Ä–∑–∏–Ω–∞</span>
                </a>
            </li>
            <li class="list">
                <a href="#" aria-label="Account">
                    <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
                    <span class="text">–ö–∞–±–∏–Ω–µ—Ç</span>
                </a>
            </li>
            <li class="list" id="delivery-button">
                <a href="#" aria-label="Delivery">
                    <span class="icon"><ion-icon name="bicycle-outline"></ion-icon></span>
                    <span class="text">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                </a>
            </li>
            <li class="list">
                <a href="#" aria-label="Sushi">
                    <span class="icon"><ion-icon name="fast-food-outline"></ion-icon></span>
                    <span class="text">–°—É—à–∏</span>
                </a>
            </li>
            <li class="list">
                <a href="#" aria-label="Chat">
                    <span class="icon"><ion-icon name="chatbubble-outline"></ion-icon></span>
                    <span class="text">–ß–∞—Ç</span>
                </a>
            </li>
        </ul>
        <div class="indicator"></div>
    </div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞ -->
<div id="chat-modal" class="modal">
    <div class="modal-content">
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
        <span class="close-button" id="close-chat-modal">&times;</span>
        <h2>–ß–∞—Ç</h2>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ -->
        <div id="chat-content" style="max-height: 400px; overflow-y: auto; padding: 10px;">
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram -->
            <div id="chatMessages" class="chat-messages-container"></div>

        </div>
       
    </div>
</div>



    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-modal">&times;</span>
            <h2 class="cart-header">–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <div id="cart-items">
                <!-- –ü—Ä–∏–º–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div class="cart-item">
                    <button class="remove-button">&times;</button>
                    <img src="images/Rectangle-3.webp" alt="Product Image" width="100" height="100">
                    <div class="item-details">
                        <h3>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
                        <p>–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</p>
                        <p class="item-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1</p>
                    </div>
                </div>
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
            </div>
            <button id="checkout-button" class="order-button">–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-checkout-modal">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
            <form id="checkout-form">
                <label for="name">–ò–º—è:</label>
                <input type="text" id="name" name="name" required>
                <label for="address">–ê–¥—Ä–µ—Å:</label>
                <input type="text" id="address" name="address" required>
                <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                <input type="tel" id="phone" name="phone" required>
                <label for="additionalInfo">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</label>
                <textarea id="additionalInfo" name="additionalInfo"></textarea>
                <button type="submit" class="order-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
    <div id="delivery-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-delivery-modal">&times;</span>
            <h2>–î–æ—Å—Ç–∞–≤–∫–∞</h2>
            <div id="delivery-map" style="height: 300px; width: 100%;">
                <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–∞—Ä—Ç–∞ -->
            </div>
            <p>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 30-45 –º–∏–Ω—É—Ç</p>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="log-messages" class="log-container"></div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script type="module" src="/js/main.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>


    <script src="/socket.io/socket.io.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const socket = io();
        
            // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
            socket.on('chat history', function (messages) {
                messages.forEach(message => {
                    addMessageToChat(message);
                });
            });
        
            // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
            socket.on('chat message', function (msg) {
                addMessageToChat(msg);
            });
        
            // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∞–π–∫–æ–≤
            socket.on('like update', function ({ id, likes }) {
                const likeButton = document.querySelector(`.like-button[data-id="${id}"]`);
                if (likeButton) {
                    likeButton.textContent = `üëç ${likes}`;
                }
            });
        
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
            function addMessageToChat({ _id, text, imageUrl, likes }) {
                const chatMessages = document.getElementById('chatMessages');
                if (chatMessages) {
                    // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
                    const messageCard = document.createElement('div');
                    messageCard.className = 'message-card';
        
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
                    if (text) {
                        const messageText = document.createElement('div');
                        messageText.className = 'message-text';
                        messageText.textContent = text;
                        messageCard.appendChild(messageText);
                    }
        
                    // –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
                    if (imageUrl) {
                        const messageImage = document.createElement('img');
                        messageImage.className = 'message-image';
                        messageImage.src = imageUrl;  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                        messageCard.appendChild(messageImage);
                    }
        
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏
                    const messageTimestamp = document.createElement('div');
                    messageTimestamp.className = 'message-timestamp';
                    messageTimestamp.textContent = new Date().toLocaleTimeString(); // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è
                    messageCard.appendChild(messageTimestamp);
        
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ª–∞–π–∫–∞
                    const likeButton = document.createElement('button');
                    likeButton.className = 'like-button';
                    likeButton.textContent = `üëç ${likes || 0}`;
                    likeButton.setAttribute('data-id', _id); // –ü—Ä–∏–≤—è–∑–∫–∞ ID —Å–æ–æ–±—â–µ–Ω–∏—è –∫ –∫–Ω–æ–ø–∫–µ
                    likeButton.addEventListener('click', () => likeMessage(_id, likeButton));
                    messageCard.appendChild(likeButton);
        
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
                    chatMessages.appendChild(messageCard);
                } else {
                    console.error("–≠–ª–µ–º–µ–Ω—Ç #chatMessages –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.");
                }
            }
        
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∞–π–∫–æ–≤
            async function likeMessage(messageId, likeButton) {
                try {
                    const response = await fetch(`/api/messages/${messageId}/like`, {
                        method: 'POST'
                    });
                    const data = await response.json();
                    likeButton.textContent = `üëç ${data.likes}`; // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ –Ω–∞ –∫–Ω–æ–ø–∫–µ
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ª–∞–π–∫–∞:', error);
                }
            }
        });
        </script>
        
      


    
    
    
</body>
</html>
